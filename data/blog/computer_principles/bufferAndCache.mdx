---
title: buffer 和 cache 的区别
date: '2024-08-01'
tags: ['computer principles', 'buffer','cache']
draft: false
summary: buffer 和 cache 的区别
---

# What

Buffer，通常被称为缓冲区，是一个临时存储数据的区域。它的主要作用是在`不同速度的设备`之间`传输数据`时`提供平衡`。

Cache（缓存）主要用于提高系统的响应速度。Cache的工作原理是`将经常访问的数据复制到更快的存储介质`中，如内存。这样，在`后续访问`这些数据时，系统可以`直接从缓存中读取`，而无需再从原始数据源（如硬盘）中获取。

# How

- buffer:当计算机与其他设备（如硬盘、网络设备等）进行数据交换时，由于这些设备的速度可能不同，Buffer可以确保数据在传输过程中不会丢失或混乱。通过将数据暂时存储在Buffer中，计算机可以在等待较慢设备完成数据传输的同时继续执行其他任务。

- cache:Cache的工作原理是将经常访问的数据复制到更快的存储介质中，如内存。这样，在后续访问这些数据时，系统可以直接从缓存中读取，而无需再从原始数据源（如硬盘）中获取。由于缓存的访问速度通常比硬盘等存储设备快得多，因此这可以显著减少数据访问时间，提高系统性能。

# When

- buffer:例如，在I/O操作中，磁盘Buffer用于暂时存储数据，以提高读写性能。

- cache:例如，数据库查询结果可以存储在缓存中，以减少对数据库的访问频率。



# 前端缓存
前端缓存 分 `强缓存` 和  `协商缓存`

    1.强缓存

     如图片，CSS文件等不常更改的资源，没有必要在 HTTP 响应中频繁携带，就会在 HTTP 响应里面添加一个响应头 `Cache-Control`：max-age=1200（即缓存有效时间为1200s）。这会让浏览器自动将该请求的资源`缓存到本地`,`二次请求`若是`没过期`，直接从`本地获取`，`不发送请求`。

    2.协商缓存
        
    两种资源标识符
    
    1.`Last-Modified`：资源上一次修改的时间

    浏览器第一次请求资源时，服务端会返回资源和资源标识 last-Modified；

    当浏览器下一次请求该资源时，会带上这个标识，请求头键名为：If-Modified-Since，键值为第一次访问时服务端返回的那个修改时间标识；
    
    该请求发送到服务端之后，服务端会检查该值跟所请求资源的最近修改时间是否为一致：
    
    （1）如果一致直接返回304
    
    （2）如果不一致返回200 + 最新资源 + 最新的资源修改时间


    2.`ETag`：资源对应的唯一字符串

    浏览器第一次请求资源时，服务端会返回资源和资源标识 ETag 字符串；

    当浏览器下一次请求该资源时，会带上这个字符串，请求头的键名为：If-None-Match，键值为第一次访问时服务端返回的 ETag 字符串；

    该请求发送到服务端之后，服务端会检查该值跟所请求资源的标识字符串是否一致：

    （1）如果一致说明文件内容没有发生变化，直接返回304；

    （2）如果不一致返回200 + 最新资源 + 最新的 ETag字符串。


Last-Modified 和 ETag 比较 `优先使用 ETag`,Last-Modified 标识即使文件内容相同，但是只要修改时间发生变化，都会再次返回该资源，而 `ETag 可以判断出文件内容是否相同，相同则直接返回304，缓存策略更佳`。